# [71. 简化路径](https://leetcode-cn.com/problems/simplify-path/)

给你一个字符串 path ，表示指向某一文件或目录的 Unix 风格 绝对路径 （以 '/' 开头），请你将其转化为更加简洁的规范路径。

在 Unix 风格的文件系统中，一个点（.）表示当前目录本身；此外，两个点 （..） 表示将目录切换到上一级（指向父目录）；两者都可以是复杂相对路径的组成部分。任意多个连续的斜杠（即，'//'）都被视为单个斜杠 '/' 。 对于此问题，任何其他格式的点（例如，'...'）均被视为文件/目录名称。

请注意，返回的 规范路径 必须遵循下述格式：

始终以斜杠 '/' 开头。
两个目录名之间必须只有一个斜杠 '/' 。
最后一个目录名（如果存在）不能 以 '/' 结尾。
此外，路径仅包含从根目录到目标文件或目录的路径上的目录（即，不含 '.' 或 '..'）。
返回简化后得到的 规范路径 。

**示例 1：**

输入：path = "/home/"

输出："/home"

解释：注意，最后一个目录名后面没有斜杠。 

**示例 2：**

输入：path = "/../"

输出："/"

解释：从根目录向上一级是不可行的，因为根目录是你可以到达的最高级。

**示例 3：**

输入：path = "/home//foo/"

输出："/home/foo"

解释：在规范路径中，多个连续斜杠需要用一个斜杠替换。

**示例 4：**

输入：path = "/a/./b/../../c/"

输出："/c"

**提示：**

- 1 <= path.length <= 3000
- path 由英文字母，数字，'.'，'/' 或 '_' 组成。

- path 是一个有效的 Unix 风格绝对路径。

## 题解

### 1、栈的应用

首先本题涉及目录的路径，第一时间联想到用栈来处理。因为这种“场景”会涉及到一个操作——返回上一级，这种时候就需要用栈的后进先出原则了。类似的，当我们浏览网页时，经常会点击“返回”按钮，这时会返回上一个浏览过的页面，这里也是用栈这种数据结构来处理的。

本题的一个难点在于本人不太了解Unix路径风格，领悟题意领悟了很久。

题目的解法就是将输入的path字符串用 '/' 进行分割，然后关键是要搞清楚，分割后可能会出现哪几种情况，分别做讨论，用 if elif 这种结构把每种情况的处理方法写对就可以了。下面是可能出现的几种分割子串以及其处理方法：

1. 正常的路径名：直接入栈即可；
2. 空字符串：出现空字符串的原因是，path中可能出现多个 '/' 连续的情况，此时我们用 path.split('/') 进行切割后，就会在多个连续的 '/' 之间切出空字符串。对于空字符串，我们不做处理，直接跳过即可；
3. 若干 '.'：这种情况的处理方法，题目本身说的很清楚了：
   1. 一个点——'.'：表示当前目录，即目录没有往下一级发展，故跳过 '.' ，不做处理；
   2. 两个点——'..'：表示返回上一级目录，遇到这种情况，需要利用栈后进先出的特性，弹出栈顶元素，模拟返回上一级的效果；
   3. 三个及以上的点——'...'：表示文件名，故处理方式和正常的路径名一致，直接入栈即可。

上述情况和处理方式写清楚了，基本就可以写出正确的代码了

```python
class Solution:
    def simplifyPath(self, path: str) -> str:
        # 初始化栈
        stack = []
        # 将 / 作为分隔符进行切割
        for file_name in path.split('/'):
            # 可能切出：
            # 1、正确的文件名，直接入栈即可
            # 2、空字符串 - 因为连续的 / - 这种不处理，直接跳过
            # 3、若干. - 根据题意，一个.表示当前目录，不处理；两个.表示上一级目录，弹出栈顶元素
            if file_name == '..' and stack != []:
                stack.pop()
            elif file_name not in ('', '.', '..'):
                stack.append(file_name)
        # 重新组成路径，以 / 开头，且文件名之间用 / 隔开
        return '/' + '/'.join(stack)
```

本题主要还是两个点：

1. Python内置函数的使用：path.split() 和 '/'.join(stack) 用于字符串的分割和拼接；
2. 栈后进先出（先进后出）特性的运用。

